 @model GlanceBudgeter.Models.CodeFirst.Household
@using Microsoft.AspNet.Identity
@{var user = User.Identity.GetUserId(); }
 <!-- DataTables -->
<link href="~/assets/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" />
<link href="~/assets/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" />
<link href="~/assets/plugins/datatables/buttons.bootstrap.min.css" rel="stylesheet" />

<link href="~/assets/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" />
<link href="~/assets/plugins/datatables/responsive.bootstrap.min.css" rel="stylesheet" />
<link href="~/assets/plugins/datatables/scroller.bootstrap.min.css" rel="stylesheet" />
<link href="~/assets/css/components.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Home Page";
}
 @if (!User.Identity.IsAuthenticated)
 {
   <H2>Please Log In To Begin Your Simple Budget!</H2>
 }
 else
 {
    <div class="container">
        <div class=" row">
            <div class="col-lg-12">
                <h2>Welcome @ViewBag.FullName! , To Your Personalized SimpleBudget!</h2>

            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="card-box">
                    <div class="dropdown pull-right">
                        <a href="#" class="dropdown-toggle card-drop" data-toggle="dropdown"
                           aria-expanded="false">
                            <i class="zmdi zmdi-more-vert"></i>
                        </a>

                    </div>
                    <h4 class="header-title m-t-0 m-b-30">Pie Chart</h4>

                    <canvas id="pie" height="300"></canvas>

                </div>
            </div>

           


            <div class="col-lg-6">
                <h4>HouseHold Members</h4>
                @foreach (var members in Model.Members)
                {

                    <img src="@members.ProfilePic" style="max-height:100px;max-width:100px;" class="img-circle" />
                        @members.FullName



                        <br />
                }

            </div>
        </div>


        <div class="row">
            <div class="col-xs-12">
                <h4>Transactions</h4>



                <ul class="nav nav-tabs">
                    <li role="presentation" class="active">
                        <a href="#home1" role="tab" data-toggle="tab">Expense</a>
                    </li>
                    <li role="presentation">
                        <a href="#profile1" role="tab" data-toggle="tab">Income</a>
                    </li>
                    
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade in active" id="home1">
                        <div class="card-box table-responsive">
                            <div class="dropdown pull-right">
                                <a href="#" class="dropdown-toggle card-drop" data-toggle="dropdown" aria-expanded="false">
                                    <i class="zmdi zmdi-more-vert"></i>
                                </a>

                            </div>

                            <h4 class="header-title m-t-0 m-b-30">Expense Transactions</h4>

                            <table id="datatable" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Category</th>
                                        <th>Amount</th>
                                        <th>Created</th>
                                        <th>Account </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    @foreach (var accone in Model.Transactions.Where(a => a.CategoryId == 3).Where(a => a.AuthorId == User.Identity.GetUserId()))
                                    {
                                        <tr>
                                            <td>@accone.Name</td>
                                            <td>@accone.Description</td>
                                            <td>@accone.Category.Name</td>
                                            <td>@accone.Amount</td>
                                            <td>@accone.Created</td>
                                            <td></td>
                                        </tr>




                                    }
                                   
                              
                                  
                                </tbody>
                            </table>
                        </div>
                        <!-- end col -->
                        <!-- end row -->
                    </div>
             









            <div role="tabpanel" class="tab-pane fade" id="profile1">
                <div class="card-box table-responsive">
                    <div class="dropdown pull-right">
                        <a href="#" class="dropdown-toggle card-drop" data-toggle="dropdown" aria-expanded="false">
                            <i class="zmdi zmdi-more-vert"></i>
                        </a>

                    </div>

                    <h4 class="header-title m-t-0 m-b-30">Default Example</h4>

                    <table id="responsiveTableone" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Description</th>
                                <th>Category</th>
                                <th>Amount</th>
                                <th>Created</th>
                                <th>Account </th>
                            </tr>
                        </thead>

                        <tbody>
                            @foreach (var income in Model.Transactions.Where(a=>a.CategoryId == 4))
                            {
                                <tr>
                                    <td>@income.Name</td>
                                    <td>@income.Description</td>
                                    <td>@income.Category.Name</td>
                                    <td>@income.Created</td>
                                    <td>@income.Accounts.Name</td>
                                  
                                </tr>


                            }
                           
                           
                        </tbody>
                        @*<div class=" pull-right">@Viewbag.Balance</div>*@
                    </table>
                </div>
                <!-- end col -->
                <!-- end row -->
            </div>
        </div>
</div>
    </div>
           </div>          
                <!-- end col -->


                 























         
 }


@section scripts
 {
    
    <script>
            var resizefunc = [];
        </script>
    
<script src="~/assets/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.bootstrap.js"></script>
<script src="~/assets/plugins/datatables/dataTables.buttons.min.js"></script>
<script src="~/assets/plugins/datatables/buttons.bootstrap.min.js"></script>
<script src="~/assets/plugins/datatables/jszip.min.js"></script>
<script src="~/assets/plugins/datatables/pdfmake.min.js"></script>
<script src="~/assets/plugins/datatables/vfs_fonts.js"></script>
<script src="~/assets/plugins/datatables/buttons.html5.min.js"></script>
<script src="~/assets/plugins/datatables/buttons.print.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.fixedHeader.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.keyTable.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.responsive.min.js"></script>
<script src="~/assets/plugins/datatables/responsive.bootstrap.min.js"></script>
<script src="~/assets/plugins/datatables/dataTables.scroller.min.js"></script>

<script src="~/assets/js/jquery.core.js"></script>
<script src="~/assets/js/jquery.app.js"></script>
           <!-- Chart JS -->





<!-- Datatable init js -->
<script src="~/assets/pages/datatables.init.js"></script>

<script type="text/javascript">
         $(document).ready(function () {
             $('#datatable').dataTable();
             $('#datatable-keytable').DataTable({ keys: true });
             $('#datatable-responsive').DataTable();
             $('#datatable-scroller').DataTable({ ajax: "assets/plugins/datatables/json/scroller-demo.json", deferRender: true, scrollY: 380, scrollCollapse: true, scroller: true });
             var table = $('#datatable-fixed-header').DataTable({ fixedHeader: true });
         });
         TableManageButtons.init();

</script>
    <script>

         $(function () {
             $('#responsiveTableone').DataTable({
                 responsive: true,
                 'iDisplayLength': 5,
             });
         })


    </script>
    


    
}